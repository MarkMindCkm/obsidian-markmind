# obsidian mark mind 

## 注意事项

本插件并不是开源的，后面将会增加更多的功能。  
网站 : https://www.markmind.net/cn  


## 更新日志 1.0.9


### 这是一个大版本更新
1. 修复 #4， pdf 标注支持使用`file://` 协议，目前只能在桌面版本中使用`file://`协议，并且这种方式标注会被保存在该markdown 文件中（即使您选择`annos`方式）,使用方式如下：

```
annotate-target: file://pdf absolute path
annotate-type: pdf

```
2. fix #29 , 从这个版本开始支持移动端，并且和桌面端拥有一致的体验
3. 添加一些命令
- 选择思维导图节点，修改布局方式（rich 模式支持）
- 在markdown和思维导图之间切换
- rich 模式下，在`更多`选项中添加一些菜单项，这些操作会将文本自动复制进剪贴板
   -  复制节点文本为markdown , 包含子节点，生成的文本类似 basic 模式
   - 仅复制该节点文本
   - 生成节点链接，可以在其他文件中引用
4. 支持修改总结、外框、关联线的颜色
5. 如果在桌面版本设置了激活码，在您的插件data.json中，将会自动生成一个移动端的激活码，将data.json 复制的移动端即可激活
6. 支持移动rich模式下思维导图根节点

![12117](https://user-images.githubusercontent.com/18719494/135819440-34380383-0a3a-481c-b5ac-205f6a9da155.gif)
<img src="https://user-images.githubusercontent.com/18719494/135823093-f34d6870-7dfb-4646-8874-1347ad5047f0.gif" width="300"/>

### v1.0.8

修复 #26， 修复tab键引起的问题  
修复在大纲模式下，使用ctrl + down/up 导致markdown格式丢失的问题

### v1.0.7

fix #24, 该问题是pdfjs插件引起的，请重新下载插件 [PDFJS Plugin](https://github.com/MarkMindCkm/obsidian-markmind/releases/download/1.0.7/pdfjs.zip)

### v1.0.6
紧急修复 #22 #21

**重要：需要重新下载[pdfjs插件](https://github.com/MarkMindCkm/obsidian-markmind/releases/download/1.0.4/pdfjs.zip)，该插件可以支持多开pdf标注窗口，并且保留了更多的功能，下载插件后，一定要在设置页面添加 pdfjs 插件路径**  

### v1.0.5

紧急修复思维导图`rich` 错误  

### v1.0.4
### 中文  
这是一次大的版本更新,增强了程序的稳定性  

**注意：需要重新下载[pdfjs插件](https://github.com/MarkMindCkm/obsidian-markmind/releases/download/1.0.7/pdfjs.zip)，该插件可以支持多开pdf标注窗口，并且保留了更多的功能，下载插件后，一定要在设置页面添加 pdfjs 插件路径**  

1, fix #18 , 你可以在设置页面选择pdf阅读器的皮肤  
2. fix #17   
3. fix #15   
4. fix #8   
5. 支持向pdf标注添加评论  
6. 支持导出时将高亮和评论添加到原来的pdf文件中，它将在您的文件夹生成一个` ${pdf name}-annotate.pdf ` 文件,你可以在其他的软件中使用  
7. 在内部将pdf标注和思维导图功能已经进行拆分，实际上可以当做两个插件使用  
8. 支持多开pdf 标注窗口  
9. 将`basic` 模式下思维导图布局由tree更改为mind map  
8. fix #2 , 在 `rich` 模式   
 - 当第一次保存数据时，它将按照下面的格式生成数据  
 - 当不是第一次保存数据时, 它将仅仅替换 '${mindmap data}', 所以你可以更改文件了，并且可以在其他文件引用，一定要注意不要修改`json`部分，否则会破坏思维导图数据  
 - 注意：还有一种引用思维导图节点的方法，就是按住CTRL/CMD，点击节点，会自动生成引用链接并保存到剪贴板中，然后你可以复制到其他的md文件中  
<pre>  
---
mindmap-plugin: rich
---

# title
``` json
  ${mindmap data}
```

</pre>
 
<hr>
  
使用pdf标注的方法有一些更改，你可以在md文件添加`yaml`以激活pdf标注功能：  
```
---

annotate-target: test/test.pdf
annotate-type: pdf

---
```  
然后你可以在更多菜单中发现按钮 `标注pdf文件`   

1. 你仍然可以在设置页面选择 `markdown` 或`annos` 去保存标注  
  - `annos` 是默认的方式 , 它是 `json` 文件 , 你可以使用协议 `obsidian://jump-to-pdf` 引用标注 ,  
      - 这种方式的好处是它基本上不会污染md文件  
  - `md` 是推荐的方式  
     - 你可以使用 `obsidian://jump-to-pdf` 引用标注  
     -  或者你可以使用 ![[ md#^block id]] 引用标注  
     - 这种方式好处是可以和md深度融合  
     - 坏处是保存在md文件的标注，在编辑模式可读性不是很好  
 2. 请在设置页面打开 `obsidian://jump-to-pdf` 协议支持  
 3. 其他的功能保持不变  

<hr>
<br>
<br>

## 简介

Obsidian mark mind 是一个思维导图和PDF文件标注工具

## 思维导图介绍

该插件包含两种模式 : basic and rich 

通过更改 yaml 来切换 :

```yaml
---

mindmap-plugin:basic (or rich)

---
```

在`basic`模式下，您能使用基本的思维导图功能和大纲功能，其中思维导图功能就相当于 obsidian-enhancing-mindmap 插件，该模式保存的数据是有层级的列表。

在`rich`模式下, 您可以使用所有的思维导图功能，但该模式不支持大纲。

除了基本的导图功能外，包括以下功能

- 对节点概括
- 框住节点
- 节点之间添加连线
- 使用自由的节点
- pdf 标注
- 添加pdf标注和节点之间的联系

### Rich mode will output  this  markdown:

在`rich`模式下，将输出以下形式的markdown文件，主要内容放在`json`中

```markdown
---

mindmap-plugin:rich

---

# md 

​``` json
{...}
​```

```

### 思维导图快捷键

| 新建导图                           | Ctrl/Cmd+P                   |
| --------------------------------------- | ---------------------------- |
| 新建节点                          | Tab                          |
| 新建同级节点                      | enter                        |
| 删除节点                             | Delete/Backspace             |
| 编辑节点                              | Space/dblclick node          |
| 撤销                                   | Ctrl/Cmd+Z                   |
| 恢复                                    | Ctrl/Cmd+Y                   |
| 退出编辑节点                          | Tab                          |
| 展开节点                             | Ctrl/Cmd + /                 |
| 收缩节点                           | Ctrl/Cmd + /                 |
| 拖放节点               | Drag and drop node           |
| 切换焦点节点                               | Up/down/left/right           |
| 放大、缩小画布                             | Ctrl/Cmd + mouse wheel       |
| 居中根节点                     | Ctrl/Cmd + E                 |
| 切换导图布局                  | 选中某节点 ，Ctrl/Cmd + U / D / L / R / M |
| 删除归纳、外框、联系线 | Delete/Backspace             |

<img src = 'https://user-images.githubusercontent.com/18719494/130028629-1a1e448d-32b9-4201-b152-1ad09439e18e.gif' width="800px">

## PDF 标注

- 高亮文字
- 矩形标注，该功能在您的文件夹将会自动生成一个图片
- 创建导图节点和标注之间的双向联系


### 如何使用PDF标注功能

### <span style="color:red">标注步骤</span>

1. 首先下载 pdf js插件，在这里下载 [pdf js plugin](https://github.com/MarkMindCkm/obsidian-markmind/releases/download/1.0.7/pdfjs.zip) ， 注意不要下载官方的版本，因为这个版本是被我修改了一部分代码。
2. 在设置页面添加PDF插件的路径，比如您将 pdf js 解压到D盘的plugins文件夹，那么就输入 D:plugins/pdfjs，注意是绝对路径 
3. 打开为思维导图
4. 使用`[[]]`链接pdf
5. 点击后会自动打开PDF阅读器，之后就可以使用标注功能了
6. 目前保存标注的方式有两种
    - 默认的情况下，使用pdf标注功能会在您的文件夹中生成对应的`annos`文件，该文件保存的是pdf标注的信息，其本质是一个`json`文件
    - 在设置页面中将保存标注方式更改为`markdown`，最好重启一下obsidian，在这种情况下，使用pdf标注功能将会在您的文件夹中生成一个`${pdf name}-annotate.md`形式的markdown文件，这个文件中，每个标注都有一个块标志，你可以在其他的文件中引用该块，注意：最好不要修改该文件，因为每当进行标注时，程序都会自动重新生成该文件。
7. 您可以在`更多`菜单下，选择隐藏思维导图，从而只用PDF标注功能，这样您可以随意的拖动窗口，比如将PDF标注放在左侧、上侧等等
   

### 如何创建节点和标注之间的联系？

有三种方式可以添加PDF标注和节点的联系

#### 默认的方式，这种方式只能在思维导图中使用，未开启协议支持情况
- 创建一个标注
- 点击标注，会自动将标注信息复制的剪贴板
- 编辑某个导图节点，使用 `ctrl/cmd + v`即可创建联系，在节点上将会生成一个标注标志
- 点击标注标志将会自动复制标注的唯一`id`至剪贴板，这样可以使用搜索功能查看有哪些文件引用了该标注

#### 第二种是使用 `obsidian://jump-to-pdf`协议，这种方式可以支持markdown文件、大纲模式以及思维导图
- 首先在设置中，打开协议支持，最好重新启动obsidian
- 创建一个思维导图，并引用一个PDF文件, 使用`[[]]`语法
- 点击PDF, 进行标注，如果你只想使用PDF标注功能，可以在菜单中 `隐藏思维导图`
- 点击标注将会自动生成对应的引用 , 并且复制到剪贴板
- 复制引用到markdown文件中

##### 在rich模式下
   - 如果开启了协议支持，按住ctrl/cmd键，点击思维导图节点会自动生成一个对该节点的引用链接,同样节点也可以使用上面的方法引用PDF标注
   - 不开启协议支持，将保持原来的功能

PDF 标注形式如下 ：xxxxxx[📌](obsidian://jump-to-pdf?pdf=xxxxxx.pdf&annotate=xxxxxx)
思维导图节点引用形式如下 ：xxxxxx[🔖](obsidian://jump-to-pdf?md=xxxxxx.md&note=xxxxxx)


#### 第三种则是使用markdown文件保存标注，这种方式是最好的，可以融合markdown文件、大纲和思维导图
 - 可以在其他文件中使用 `[[${md name}#${block reference}]]` 语法链接标注
 - 点击链接
   - 如果已经打开某个思维导图并且正在标注PDF，则会直接打开对应的PDF，并跳转的对应的标注位置
   - 如果未在标注，则会随机打开一个思维导图，并进入PDF标注模式，跳转的对应的标注位置



### 演示


#### `obsidian://jump-to-pdf`
![1](https://user-images.githubusercontent.com/18719494/130034457-f9f44170-6030-4179-b59f-21d4035c82c7.gif)

![2](https://user-images.githubusercontent.com/18719494/130034688-496d8156-d4c5-4764-bc4e-a9e0d7e2a499.gif)

![3](https://user-images.githubusercontent.com/18719494/130034968-7e8ff685-7ce7-4bd8-aa11-f8e7fd71bbf0.gif)

![4](https://user-images.githubusercontent.com/18719494/130035036-fe5394ed-8e18-4e3e-922e-81674f132061.gif)

#### 用markdown 方式保存标注
![1](https://user-images.githubusercontent.com/18719494/131444787-c6168197-ecd6-4b20-a134-39eb54c47d90.gif)
![2](https://user-images.githubusercontent.com/18719494/131444872-6b11111d-48de-462d-b96a-d468a0aeb8ef.gif)

## 大纲
在`basic`模式下，添加`yaml`用以激活大纲模式

```
---

mindmap-plugin: basic
display-mode: outline

---
```

## Outline short cut

| Features             | Short Cut                       |
| -------------------- | ------------------------------- |
| New Brother Node     | Enter                           |
| Indent               | Tab                             |
| Unindent             | Shift+Tab                       |
| Zoom in              | Ctrl/Cmd+] Or Double Click Dott |
| Zoom out             | Ctrl/Cmd+[                      |
| Move Up Or Down Node | Ctrl/Cmd + up/down              |




## 支持我
  您也可以通过捐款支持我<br>
<a href="https://www.buymeacoffee.com/markmind"><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=markmind&button_colour=FFDD00&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=ffffff"></a>
<br>

<img src="https://user-images.githubusercontent.com/18719494/124471790-e3844f80-ddcf-11eb-83c6-c5c16996c206.png" width="200px"/>



